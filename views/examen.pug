extends layout

block content

    
    section(class='examen-content')
        h1
        
        include extensionStat
        
        form(action="./resultats")
            fieldset
                legend
                p(class="question")
                label(for="1")
                label(for="2")   
                label(for="3")
                label(for="4")
            p: input(
                      type="submit"
                      value="Question suivante"
                    )
                    
                    
            script(type="application/javascript").
            
                function miseAJourQuestion(data){
                    $('.question').html(data.question);
                    $('[for=1]').html("<input id=\"1\" type=\"checkbox\">" + data.reponses[0] + "</label>");
                    $('[for=2]').html("<input id=\"2\" type=\"checkbox\">" + data.reponses[1] + "</label>");
                    $('[for=3]').html("<input id=\"3\" type=\"checkbox\">" + data.reponses[2] + "</label>");
                    $('[for=4]').html("<input id=\"4\" type=\"checkbox\">" + data.reponses[3] + "</label>");
                }
                
            
                function nouvelleQuestionHTML(){
                    $.ajax({
                        type: "GET",
                        url: "/ajax/nouvelle_question_exam_HTML",

                        error:function(msg, string){
                            console.log( "Error !: " + string );
                        },

                        success:function(data){
                           miseAJourQuestion(data);
                        }
                    });
                    $("h1").text("Examen de HTML");
                }
                
                function nouvelleQuestionCSS(){
                    $.ajax({
                        type: "GET",
                        url: "/ajax/nouvelle_question_exam_CSS",

                        error:function(msg, string){
                            console.log( "Error !: " + string );
                        },

                        success:function(data){
                           miseAJourQuestion(data);
                        }
                    });
                    $("h1").text("Examen de CSS");
                }
                
                function nouvelleQuestionJS(){
                    $.ajax({
                        type: "GET",
                        url: "/ajax/nouvelle_question_exam_JS",

                        error:function(msg, string){
                            console.log( "Error !: " + string );
                        },

                        success:function(data){
                           miseAJourQuestion(data);
                        }
                    });
                    $("h1").text("Examen de Javascript");
                }
            
                function nouvelleQuestion(theme, num_question){
                    if (theme=="html"){
                        nouvelleQuestionHTML();
                    }
                    else{
                        if (theme=="css"){
                            nouvelleQuestionCSS();
                        }
                        else{
                            nouvelleQuestionJS();
                        }
                    }
                    $("legend").text("Question " + num_question);
                }
            
            
                window.onload=function() {
                    var theme = sessionStorage.getItem("theme");
                    var nb_question = sessionStorage.getItem("nb_question");
                    var num_question = 1;
                    
                    nouvelleQuestion(theme, num_question);
                    
                
                    $("form").submit(function(event){
                        num_question ++;
                        if (num_question <= nb_question){
                            event.preventDefault();
                            nouvelleQuestion(theme, num_question);
                        }
                    });
                }
            
            
        include extensionExamen
        
        


